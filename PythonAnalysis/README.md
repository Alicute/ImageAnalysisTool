# 像素映射分析器 - AI逆向工程工具

这是一个专门用于分析16位DICOM图像像素映射数据的Python工具，帮助AI逆向工程算法。

## 功能特点

### 1. 智能数据解析
- 自动解析你的像素数据文件格式
- 提取位置、原始值、目标值、变化量等信息
- 支持大文件处理（600MB+）

### 2. 算法模式识别
- **全局统一算法检测**: 识别所有像素使用相同算法的情况
- **线性映射检测**: 通过相关性分析识别线性关系
- **复杂算法分析**: 处理非线性、分段函数等复杂情况
- **空间分布分析**: 检测算法是否与位置相关

### 3. AI逆向工程支持
- 生成结构化的分析报告
- 提供算法推断结果
- 给出逆向工程建议
- 支持可视化分析

### 4. 可视化分析
- 原始值vs目标值散点图
- 像素值分布直方图
- 变化量分布分析
- 空间变化模式热力图

## 使用方法

### 安装依赖
```bash
pip install PyQt5 pandas numpy matplotlib seaborn scipy
```

### 运行程序
```bash
python pixel_analyzer.py
```

### 操作步骤
1. **加载数据文件**: 选择你的像素数据TXT文件
2. **分析映射模式**: 自动分析并生成算法推断
3. **生成可视化**: 创建4个分析图表
4. **导出分析报告**: 保存详细的Markdown报告

## AI逆向工程需要的关键信息

### 1. 映射关系表
- 一对一映射关系数量
- 一对多映射关系数量
- 精确的原始值→目标值对应关系

### 2. 统计特征
- 原始值和目标值的分布范围
- 变化量的统计特征（均值、标准差）
- 相关性分析结果

### 3. 算法模式
- 是否为全局统一算法
- 线性关系强度（相关系数）
- 数学函数拟合结果

### 4. 空间特征
- 算法是否与位置相关
- 不同区域的处理差异
- 局部vs全局特征

## 分析报告示例

### 简单算法检测
```
✓ 检测到全局统一算法
算法: 目标值 = 原始值 -26805
```

### 线性算法检测
```
✓ 检测到线性映射算法
线性拟合: 目标值 = 0.591 × 原始值 + 12.3
拟合优度 R² = 0.998
```

### 复杂算法分析
```
✗ 检测到复杂算法
相关性: 0.234 (非线性关系)
建议: 可能是查找表映射或分段函数
```

## 文件格式要求

程序支持你提供的文件格式：
```
===完整16位DICOM像素映射数据===
导出时间:2025-08-0613:01:12
总像素数:8,519,680
扫描顺序:按行列排序(从左到右，从上到下)

===详细像素映射信息===
[000001]位置(0000,0000)原值65535→新值38730(变化:-26805,-40.9%)
[000002]位置(0001,0000)原值65535→新值38730(变化:-26805,-40.9%)
...
```

## 输出结果

### 1. 控制台输出
- 实时分析进度
- 关键统计信息
- 算法推断结果

### 2. GUI界面
- 数据预览
- 详细分析报告
- 交互式可视化图表

### 3. 导出报告
- Markdown格式的完整分析报告
- 包含算法推断和逆向工程建议
- 可直接提供给AI进行进一步分析

## 注意事项

1. **内存使用**: 600MB文件需要足够内存，建议8GB以上
2. **处理时间**: 完整分析可能需要几分钟
3. **采样**: 可视化时会自动采样以提高性能
4. **文件编码**: 确保文件使用UTF-8编码

## 扩展功能

### 自定义分析
```python
# 在脚本中添加自定义分析逻辑
def custom_analysis(self):
    # 你的分析代码
    pass
```

### 批量处理
```python
# 处理多个文件
file_list = ['file1.txt', 'file2.txt', 'file3.txt']
for file_path in file_list:
    analyzer.load_data(file_path)
    report = analyzer.generate_ai_analysis_report()
    # 保存报告
```

这个工具专门为你的需求设计，能够从8519680个像素点中提取出AI逆向工程所需的关键信息，帮助你准确推断出原始算法。